import React, { Component } from 'react';
import { connect } from 'react-redux';
import { fetchFurniture } from 'actions';
import {getFurniture} from 'selectors';
import R from 'ramda';
import {Link} from 'react-router';

class Furniture extends Component {
	// constructor(props) {
	// 	super(props); 
	// }
	componentDidMount() {
		this.props.fetchFurniture()
	}

	renderFurniture(furn, index) {
		const shortDescreption = R.take(56, furn.description);
		return (
			<div key={furn.id} className='col-sm-4 col-lg-3 col-md-4 book-list'>
				<div className= 'thumbnail'>
					<img 
						className='img-thumbnail'
						src={furn.image}
						alt={furn.name}
					/>
					<div className='caption'>
						<h4 className='pull-right'>${furn.price}</h4>
						<h4>
							<Link to={`./furniture/${furn.id}`}>
								{furn.name}
							</Link>
						</h4>
						<p>{shortDescreption}</p>
						<p className='itemButton'>
							<button className='btn'>
								Buy now!
							</button>
							<Link
								to={`/furniture/${furn.id}`}
								className='btn btn-default'
							> 
								More info 
							</Link>
						</p>
					</div>
				</div>
			</div>
		)
	}
	
	render() {
		console.log(this.props)
		const {furniture} = this.props
		return (
			<div>
				<div className="furniture">
					<h2>PRODUCTS</h2>
					{furniture.map((furn, index) => this.renderFurniture(furn, index))}
				</div>
			</div>
		)
	}
}
const mapStateToProps = state => ({
	furniture: getFurniture(state)
});

const mapDispatchToProps = {
	fetchFurniture
};

export default connect(mapStateToProps, mapDispatchToProps)(Furniture);